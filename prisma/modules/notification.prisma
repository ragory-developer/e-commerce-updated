enum NotificationChannel {
  EMAIL
  SMS
  PUSH
  WEBHOOK
}

enum NotificationStatus {
  QUEUED
  SENT
  DELIVERED
  FAILED
  BOUNCED
}

model Notification {
  id String @id @default(cuid())

  userId  String?             @map("user_id")
  channel NotificationChannel
  status  NotificationStatus  @default(QUEUED)
  data    Json                @db.JsonB

  sentAt      DateTime? @map("sent_at")
  deliveredAt DateTime? @map("delivered_at")
  failedAt    DateTime? @map("failed_at")

  createdAt DateTime @default(now()) @map("created_at")

  @@index([userId])
  @@index([channel])
  @@index([status])
  @@index([createdAt])
  @@map("notifications")
}
